# 本地存储

本地的作用就是：持久化，不受页面刷新影响。

本地存储有两种方式：

- sessionStorage：会话存储，不受浏览器刷新影响，浏览器关闭数据就销毁
- localStorage：持久存储，不受浏览器刷新影响，也不受浏览器关闭影响，除非用户手动清除

我们可以把需要持久化的数据放到本地存储。

常用 API：

```js
// 存储
window.localStorage.setItem('名字', 值)

// 读取
window.localStorage.getItem('名字')

// 删除
window.localStorage.removeItem('名字')

// 删除所有
window.localStorage.clear()

// 没有修改，重新存储就是修改
```

## 只能存储字符串

```js
// "1"
window.localStorage.setItem('foo', 1)

// "hello"
window.localStorage.setItem('foo', 'hello')

// "true"
window.localStorage.setItem('foo', true)

// "1,2,3"
window.localStorage.setItem('foo', [1, 2, 3])

// "[object Object]"
window.localStorage.setItem('foo', { a: 1, b: 2 })
```

如果想要完完整整的存储数组、对象，那就需要进行 JSON 转换。

```js
const arr = [1, 2, 3]

const str = JSON.stringify(arr) // "[1,2,3]"

// 存储 JSON 字符串之后的数组
window.localStorage.setItem('foo', str)

// 读取出来的肯定是字符串
window.localStorage.getItem('foo') // "[1,2,3]"

// 为了方便使用，我们把它再转为 JS 数组
JSON.parse(window.localStorage.getItem('foo')) // [1, 2, 3]
```

```js
var user = { name: 'Jack', age: 18 }
window.localStorage.setItem('foo', JSON.stringify(user))

// 读取到的还是字符串
window.localStorage.getItem('foo') // "{"name":"Jack","age":18}"

// 将 JSON 格式的字符串转为对象方便使用
JSON.parse(window.localStorage.getItem('foo')) // { name: 'Jack', age: 18 }
```

在计算机中，还有一些相关术语：

- JSON.stringify 称之为序列化
- JSON.parse 称之为反序列化